<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jose Toledo Luna">
<meta name="dcterms.date" content="2023-10-27">
<title>Stat 13 - MOSAIC Library</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="twitter:title" content="Stat 13 - MOSAIC Library">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-sm navbar-dark "><div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../notes.html" rel="" target="">
 <span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools ms-auto tools-wide">
    <a href="https://github.com/toledo60/ucla-stats13" rel="" title="" class="quarto-navigation-tool px-1" aria-label="Github"><i class="bi bi-github"></i></a>
    <a href="https://rstudio.stat.ucla.edu" rel="" title="" class="quarto-navigation-tool px-1" aria-label="RStudio"><i class="bi bi-r-circle-fill"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#installation" id="toc-installation" class="nav-link active" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#commonly-used-functions" id="toc-commonly-used-functions" class="nav-link" data-scroll-target="#commonly-used-functions">Commonly used functions</a></li>
  <li>
<a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a>
  <ul class="collapse">
<li><a href="#numerical-summaries" id="toc-numerical-summaries" class="nav-link" data-scroll-target="#numerical-summaries">Numerical Summaries</a></li>
  <li><a href="#simulation" id="toc-simulation" class="nav-link" data-scroll-target="#simulation">Simulation</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">MOSAIC Library</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jose Toledo Luna </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">class date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 27, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header><style>
  .vertical-space {
    margin-bottom: 30px;
  }
</style>
<section id="installation" class="level3"><h3 class="anchored" data-anchor-id="installation">Installation</h3>
<p>The goal of the <code>mosaic</code> package is to make effective computation accessible to university-level students at an introductory level</p>
<p>The following packages from the <code>mosaic suite</code> will be used throughout the labs.</p>
<ul>
<li>
<a href="https://github.com/ProjectMOSAIC/mosaic">mosaic</a>
<ul>
<li><a href="https://github.com/ProjectMOSAIC/mosaicCore">mosaicCore</a></li>
<li><a href="https://github.com/ProjectMOSAIC/mosaicData">mosaicData</a></li>
</ul>
</li>
</ul>
<p>You can the above packages by running the following command in the <strong>Console</strong></p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'mosaic'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are installing the package for the first time, please be aware that it might take some time since there are numerous dependencies that need to be installed beforehand (this is done automatically)</p>
</div>
</div>
<p>You can see the remaining packages part of the <code>mosaic suite</code> on the <a href="http://www.mosaic-web.org/R-packages.html">Project MOSAIC Homepage</a>, but they will not be used for this course</p>
<div class="vertical-space">

</div>
<p>If you have successfully installed <code>mosaic</code> package you should be able to run the command <code><a href="https://github.com/ProjectMOSAIC/mosaic">library(mosaic)</a></code> in the console without any errors. However, you will see the following <em>messages</em></p>
<div class="cell">
<div class="sourceCode" id="annotated-cell-2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ProjectMOSAIC/mosaic">mosaic</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'mosaic':</span></span>
<span><span class="co">#&gt;   method                           from   </span></span>
<span><span class="co">#&gt;   fortify.SpatialPolygonsDataFrame ggplot2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The 'mosaic' package masks several functions from core packages in order to add </span></span>
<span><span class="co">#&gt; additional features.  The original behavior of these functions should not be affected by this.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'mosaic'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt;     count, do, tally</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:Matrix':</span></span>
<span><span class="co">#&gt;     mean</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:ggplot2':</span></span>
<span><span class="co">#&gt;     stat</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt;     binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,</span></span>
<span><span class="co">#&gt;     quantile, sd, t.test, var</span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt;     max, mean, min, prod, range, sample, sum</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-cell="annotated-cell-2" data-code-lines="1">Make sure to load <code>mosiac</code> package first, you only have to do this once at the beginning of your script. Proceeding, this tutorial will assume you have loaded the <code>mosaic</code> package</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-cell="annotated-cell-2" data-code-lines="7">The output above are simply messages when initially starting up the package warning you about masking of functions with the same name as different packages</span>
</dd>
</dl>
</div>
</div>
<p>For example, the function <code><a href="https://www.mosaic-web.org/mosaic/reference/binom.test.html">binom.test()</a></code> is used in two different packages <code>mosaic</code> and <code>stats</code>. If two packages use the same function name, then the package loaded last will hide the function from earlier packages. This is called <strong>masking</strong></p>
<p>While in general, the order of packages being loaded does not matter, if you are using multiple packages which have functions with the exact same name it is better to explicitly call the function name using <code>package_name::function</code></p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">mosaic</span><span class="fu">::</span><span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/binom.test.html">binom.test</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/binom.test.html">binom.test</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="vertical-space">

</div>
</section><section id="commonly-used-functions" class="level3"><h3 class="anchored" data-anchor-id="commonly-used-functions">Commonly used functions</h3>
<p>For <strong>numerical summaries</strong>, the following functions are <code>mosaic</code> specific and will be used throughout the course</p>
<ul>
<li>
<code><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally()</a></code>: tabulate categorical data</li>
<li>
<code><a href="https://www.mosaic-web.org/mosaic/reference/aggregating.html">favstats()</a></code>: numerical summaries including: min, Q1, media, Q3, max, mean, sd, number of observations and missing values</li>
<li>
<code><a href="https://www.mosaic-web.org/mosaic/reference/diffmean.html">diffmean()</a></code>: difference in means</li>
<li>
<code><a href="https://rdrr.io/pkg/mosaicCore/man/prop.html">prop()</a></code>: computes proportions for a single level</li>
<li>
<code><a href="https://rdrr.io/pkg/mosaicCore/man/prop.html">perc()</a></code>: computes percents for a single level</li>
</ul>
<p>While the following functions are in base R, <code>MOSAIC</code> provides equivalent functions with a <code>formula interface</code></p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">mosaic</span><span class="fu">::</span><span class="fu">mean</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">mosaic</span><span class="fu">::</span><span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/aggregating.html">median</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">mosaic</span><span class="fu">::</span><span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/aggregating.html">sd</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you are going to use say the function <code>mean</code> make sure to specify it is the <code>mosaic</code> version. For example, <code>mosaic::mean()</code>. If you want to know the differences between base R version run <code>?base::mean()</code> or <code>?mosaic::mean()</code></p>
<p><strong>Randomization/Simulation</strong></p>
<p>For randomization or simulations procedures we will primarily use the following <code>mosaic</code> functions</p>
<ul>
<li>
<code><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip()</a></code>: simulates coin tosses for individuals not yet familiarized with the binomial distribution or just like this syntax and verbosity better.</li>
<li>
<code>do()</code>: provides a natural syntax for repetition tuned to assist with replication and resampling methods</li>
</ul>
<p>For a quick overview of the basic of MOSAIC package, refer to <a href="https://cran.r-project.org/web/packages/mosaic/vignettes/MinimalRgg.pdf">Minimal R for Intro Stats</a> tutorial. Note, we will not use all of the functions in the <code>mosaic</code> package</p>
</section><section id="examples" class="level2"><h2 class="anchored" data-anchor-id="examples">Examples</h2>
<section id="numerical-summaries" class="level3"><h3 class="anchored" data-anchor-id="numerical-summaries">Numerical Summaries</h3>
<p>Consider the following vector containing various types of animals (mostly pets)</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">animals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fish"</span>, <span class="st">"cat"</span>,  <span class="st">"fish"</span>, <span class="st">"cat"</span>  ,<span class="st">"bird"</span> ,<span class="st">"fish"</span> ,<span class="st">"bird"</span> ,</span>
<span>             <span class="st">"bird"</span> ,<span class="st">"dog"</span>  ,<span class="st">"cat"</span>  ,<span class="st">"dog"</span>  ,<span class="st">"dog"</span>  ,<span class="st">"cat"</span>, <span class="st">"dog"</span>,  </span>
<span>             <span class="st">"dog"</span>,  <span class="st">"cat"</span>,  <span class="st">"bird"</span>, <span class="st">"cat"</span> , <span class="st">"bird"</span>, <span class="st">"fish"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>loading the <code>mosaic</code> package and using the <code><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally()</a></code> function</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally</a></span><span class="op">(</span><span class="va">animals</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; X
#&gt; bird  cat  dog fish 
#&gt;    5    6    5    4</code></pre>
</div>
</div>
<p>we can obtain the counts for each animal. By default <code><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally()</a></code> gives us counts, but we can also display the proportions using the <code>format</code> argument</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally</a></span><span class="op">(</span><span class="va">animals</span>, format <span class="op">=</span> <span class="st">'proportion'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; X
#&gt; bird  cat  dog fish 
#&gt; 0.25 0.30 0.25 0.20</code></pre>
</div>
</div>
<p>which is more readable than using base R</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">animals</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; animals
#&gt; bird  cat  dog fish 
#&gt; 0.25 0.30 0.25 0.20</code></pre>
</div>
</div>
<p>Reading the documentation <code><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">?mosaicCore::tally</a></code>, format can take one of the following types</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"proportion"</span>, <span class="st">"percent"</span>, <span class="st">"data.frame"</span>, <span class="st">"sparse"</span>, <span class="st">"default"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mosaicCore/man/tally.html">tally</a></span><span class="op">(</span><span class="va">animals</span>, format <span class="op">=</span> <span class="st">'percent'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; X
#&gt; bird  cat  dog fish 
#&gt;   25   30   25   20</code></pre>
</div>
</div>
</section><section id="simulation" class="level3"><h3 class="anchored" data-anchor-id="simulation">Simulation</h3>
<p>For simulation the <code>do()</code> function from <code>mosaic</code> provides a natural syntax for repetition tuned to assist with replication and resampling methods. Consider the following example</p>
<div class="cell">
<div class="sourceCode" id="annotated-cell-11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">do_hello</span> <span class="op">&lt;-</span> <span class="fu">do</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op">*</span> <span class="st">'hello'</span></span>
<span><span class="va">do_hello</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-11" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-cell="annotated-cell-11" data-code-lines="1">Interpretation: write ‘hello’ three times</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   hello
#&gt; 1 hello
#&gt; 2 hello
#&gt; 3 hello</code></pre>
</div>
</div>
<p>We are going to “do” the word three times <code>do(3)</code> using the operator <code>*</code> not to confuse with multiplication</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">do_hello</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Classes 'do.data.frame' and 'data.frame':    3 obs. of  1 variable:
#&gt;  $ hello: chr  "hello" "hello" "hello"
#&gt;  - attr(*, "lazy")= language ~"hello"
#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_EmptyEnv&gt; 
#&gt;  - attr(*, "culler")=function (object, ...)</code></pre>
</div>
</div>
<p><code>do</code> returns class <code>do.data.frame</code> and <code>data.frame</code> where each row is the output after performing the task after the <code>*</code> operator one time</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">do_hello</span><span class="op">$</span><span class="va">hello</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "hello" "hello" "hello"</code></pre>
</div>
</div>
<p>If you want to extract the values from the generated data.frame, we can use the <code>$</code> operator</p>
<p>In the next example, we are going to write the numbers <code>1:4</code> five times</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">do</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   V1 V2 V3 V4
#&gt; 1  1  2  3  4
#&gt; 2  1  2  3  4
#&gt; 3  1  2  3  4
#&gt; 4  1  2  3  4
#&gt; 5  1  2  3  4</code></pre>
</div>
</div>
<p>again the output will be a data.frame where each row is the numbers 1:4, you can think of each row as a replication of the desired task. In some way, it is similar to the base R approach of using <code>replicate</code></p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    1    1    1    1    1
#&gt; [2,]    2    2    2    2    2
#&gt; [3,]    3    3    3    3    3
#&gt; [4,]    4    4    4    4    4</code></pre>
</div>
</div>
<p>Another function from <code>mosaic</code> to consider is <code><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip()</a></code>. The function <code>rflip</code> simulates coin tosses, with heads as success and tails as failures.</p>
<div class="cell">
<div class="sourceCode" id="annotated-cell-16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">coin_toss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">coin_toss</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-16" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-cell="annotated-cell-16" data-code-lines="1">Flip a fair coin five times</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
#&gt; Flipping 5 coins [ Prob(Heads) = 0.5 ] ...
#&gt; 
#&gt; T H T H T
#&gt; 
#&gt; Number of Heads: 2 [Proportion Heads: 0.4]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">coin_toss</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  'cointoss' int 2
#&gt;  - attr(*, "n")= num 5
#&gt;  - attr(*, "prob")= num 0.5
#&gt;  - attr(*, "sequence")= chr [1:5] "T" "H" "T" "H" ...
#&gt;  - attr(*, "verbose")= logi TRUE</code></pre>
</div>
</div>
<p>The output of <code>rflip</code> is a <code>cointoss</code> object, which displays the number of heads alongside the corresponding proportion of heads. We can change the probability of obtaining heads making the coin unfair. For example,</p>
<div class="cell">
<div class="sourceCode" id="annotated-cell-18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, prob <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-18" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-cell="annotated-cell-18" data-code-lines="1">Flip 10 coins, each with probability of 0.3 of landing on heads</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
#&gt; Flipping 10 coins [ Prob(Heads) = 0.3 ] ...
#&gt; 
#&gt; T T T H T T T T H H
#&gt; 
#&gt; Number of Heads: 3 [Proportion Heads: 0.3]</code></pre>
</div>
</div>
<p>we can summarize the above output and return a <code>data.frame</code> which we can extract information from</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">coin_toss_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, prob <span class="op">=</span> <span class="fl">0.3</span>, summarize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;    n heads tails prob
#&gt; 1 10     3     7  0.3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">coin_toss_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    1 obs. of  4 variables:
#&gt;  $ n    : num 10
#&gt;  $ heads: int 3
#&gt;  $ tails: num 7
#&gt;  $ prob : num 0.3</code></pre>
</div>
</div>
<div class="vertical-space">

</div>
<p><strong>Combining <code>do()</code> and <code><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip()</a></code></strong></p>
<p>Consider the following example,</p>
<div class="cell">
<div class="sourceCode" id="annotated-cell-21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">do</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://www.mosaic-web.org/mosaic/reference/rflip.html">rflip</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">result</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-21" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-cell="annotated-cell-21" data-code-lines="1">Randomly flip a fair coin 5 times and replicate this procedure two times</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   n heads tails prop
#&gt; 1 5     2     3  0.4
#&gt; 2 5     3     2  0.6</code></pre>
</div>
</div>
<p>Recall the output after performing a <code>do()</code> statement will be a data.frame where each row is a replication of the procedure following the <code>*</code> operator. The first row shows the number of tosses, how many heads/tails where obtained and the corresponding proportion of heaads after <code>n</code> tosses</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Classes 'do.data.frame' and 'data.frame':    2 obs. of  4 variables:
#&gt;  $ n    : num  5 5
#&gt;  $ heads: num  2 3
#&gt;  $ tails: num  3 2
#&gt;  $ prop : num  0.4 0.6
#&gt;  - attr(*, "lazy")= language ~rflip(n = 5)
#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
#&gt;  - attr(*, "culler")=function (object, ...)</code></pre>
</div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
    <a class="nav-link" href="../license.html">License</a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>